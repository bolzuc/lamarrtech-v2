// Objeto de traducciones
// He añadido traducciones para las páginas de Inicio y Contacto como ejemplo.
// Puedes añadir más claves y traducciones para las otras páginas aquí.
const translations = {
    es: {
        // --- Navegación (Claves compartidas) ---
        nav_inicio: "INICIO",
        nav_servicios: "SERVICIOS",
        nav_servicios_cloud: "CLOUD",
        nav_servicios_integrate: "INTEGRATE",
        nav_servicios_data_ai: "DATA+AI",
        nav_servicios_secure: "SECURE",
        nav_servicios_sap: "SAP",
        nav_equipo: "EQUIPO",
        nav_noticias: "NOTICIAS",
        nav_contacto: "CONTACTO",
        // --- Pie de página (Claves compartidas) ---
        footer_copyright: "© 2025 Lamarr Tech. Todos los derechos reservados.",
        // --- Página: index.html ---
        hero_h1: "Creemos que el valor real nace de conectar la tecnología con un soporte humano experto.",
        hero_p: "Por eso integramos tu ecosistema End-to-End (SAP, Cloud, Apps) para que opere sin fricción. Te acompañamos con consultores expertos, no con tickets. Entendemos tu negocio y estamos presentes en cada etapa.",
        card_cloud_h3: "Arquitectura Multicloud para tu Negocio",
        card_cloud_p: "Elegimos y combinamos AWS, Google Cloud y Huawei para construir una infraestructura flexible, eficiente y preparada para crecer. Sin dependencias forzadas. Tú eliges. Tu negocio manda.",
        card_cloud_btn: "Ver Cloud",
        card_integrate_h3: "Integración de tu Ecosistema Tecnológico",
        card_integrate_p: "Conectamos SAP, nube, aplicaciones y datos para que la operación fluya sin silos, sin retrabajos y sin fricción.",
        card_integrate_btn: "Ver Integrate",
        card_data_h3: "Del Dato a la Acción (Data + IA)",
        card_data_p: "Convertimos tus datos en conocimiento accionable. Decisiones más rápidas, precisas y estratégicas con impacto directo en tu operación.",
        card_data_btn: "Ver Data+AI",
        card_secure_h3: "Protección Integral de Datos y Operaciones",
        card_secure_p: "Diseñamos seguridad multinube con control de accesos, respaldo inteligente y monitoreo continuo. Menos riesgo, más continuidad y total visibilidad.",
        card_secure_btn: "Ver Secure",
        card_sap_h3: "Dominio Profundo del Ecosistema SAP",
        card_sap_p: "+20 años de experiencia real en SAP Business One y SAP ECC. Implementamos y optimizamos con criterio y conocimiento de procesos. Resultados desde el día uno.",
        card_sap_btn: "Ver SAP",
        partners_h2: "Nuestros Socios Tecnológicos",
        map_h3: "Nuestra Presencia y Capacidad Global",
        map_p: "Un resumen de nuestras sedes, roles estratégicos y el valor que entregamos.",
        map_table_region: "Región / Sede",
        map_table_role: "Rol Estratégico",
        map_table_hq_title: "Chile (HQ)",
        map_table_hq_role: "Delivery Técnico Principal",
        map_table_hq_desc: "Arquitectura, dirección técnica, liderazgo de proyectos.",
        map_table_br_title: "Brasil",
        map_table_br_role: "Delivery Técnico Principal",
        map_table_br_desc: "Proyectos SAP, Integración, Operación Multicloud.",
        map_table_cr_ve_title: "Costa Rica & Venezuela",
        map_table_cr_ve_role: "Soporte y Continuidad",
        map_table_cr_ve_desc: "\"Follow-the-sun\" operativo / Soporte regional.",
        map_table_mia_title: "Miami",
        map_table_mia_role: "Hub de Alianzas",
        map_table_mia_desc: "Hub de alianzas (AWS, Google, Huawei, ScaleUp AI).",
        map_table_in_title: "India",
        map_table_in_role: "Acelerador de Desarrollo",
        map_table_in_desc: "Data Engineering + Automatización + Dev SecOps.",
        map_footer_h4: "Nuestro Compromiso",
        map_footer_q: "\"Operamos con equipos propios globales, sin tercerizar. Tu punto de contacto es un consultor senior, no un ticket.\"",
        // --- Página: contact.html ---
        contact_h2: "Iniciemos la Conversación",
        contact_p1: "Has explorado nuestra innovación global en IA y nuestra ejecución experta en Cloud y SAP. Has visto cómo transformamos datos en resultados para líderes de la industria.",
        contact_p2: "Ahora, es tu turno. Cada gran transformación comienza con una simple conversación. Ya sea que tengas un desafío complejo de migración, un proyecto de IA o una consulta sobre optimización, nuestro equipo está listo para escucharte.",
        form_name: "Nombre",
        form_lastname: "Apellido",
        form_email: "Correo electrónico",
        form_phone: "Teléfono (Opcional)",
        form_company: "Nombre de la Empresa (Opcional)",
        form_role: "Cargo (Opcional)",
        form_service: "Servicio de Interés",
        form_service_option: "Selecciona un servicio de interés...",
        form_message: "Mensaje",
        form_submit_btn: "Enviar",
        contact_info_h2: "Información Directa",
        contact_info_phone: "Teléfono:",
        contact_info_email: "Correo Electrónico:",
        contact_info_address: "Dirección:",
        popup_title: "¡Gracias por contactarnos!",
        popup_p: "Tu mensaje ha sido enviado. Para una atención más rápida, puedes contactarnos directamente por WhatsApp.",
        popup_btn: "Hablar por WhatsApp",
        // ... (añadir más claves para otras páginas)
    },
    en: {
        // --- Navegación (Claves compartidas) ---
        nav_inicio: "HOME",
        nav_servicios: "SERVICES",
        nav_servicios_cloud: "CLOUD",
        nav_servicios_integrate: "INTEGRATE",
        nav_servicios_data_ai: "DATA+AI",
        nav_servicios_secure: "SECURE",
        nav_servicios_sap: "SAP",
        nav_equipo: "TEAM",
        nav_noticias: "NEWS",
        nav_contacto: "CONTACT",
        // --- Pie de página (Claves compartidas) ---
        footer_copyright: "© 2025 Lamarr Tech. All rights reserved.",
        // --- Página: index.html ---
        hero_h1: "We believe real value comes from connecting technology with expert human support.",
        hero_p: "That's why we integrate your End-to-End ecosystem (SAP, Cloud, Apps) to operate frictionlessly. We support you with expert consultants, not tickets. We understand your business and are present at every stage.",
        card_cloud_h3: "Multicloud Architecture for your Business",
        card_cloud_p: "We select and combine AWS, Google Cloud, and Huawei to build a flexible, efficient, and growth-ready infrastructure. No forced dependencies. You choose. Your business commands.",
        card_cloud_btn: "View Cloud",
        card_integrate_h3: "Integration of your Tech Ecosystem",
        card_integrate_p: "We connect SAP, cloud, applications, and data so operations flow without silos, rework, or friction.",
        card_integrate_btn: "View Integrate",
        card_data_h3: "From Data to Action (Data + AI)",
        card_data_p: "We turn your data into actionable insights. Faster, more accurate, and strategic decisions with direct impact on your operation.",
        card_data_btn: "View Data+AI",
        card_secure_h3: "Comprehensive Data & Operations Protection",
        card_secure_p: "We design multicloud security with access control, smart backup, and continuous monitoring. Less risk, more continuity, and total visibility.",
        card_secure_btn: "View Secure",
        card_sap_h3: "Deep Expertise in the SAP Ecosystem",
        card_sap_p: "20+ years of real experience in SAP Business One and SAP ECC. We implement and optimize with criteria and process knowledge. Results from day one.",
        card_sap_btn: "View SAP",
        partners_h2: "Our Technology Partners",
        map_h3: "Our Global Presence and Capability",
        map_p: "A summary of our locations, strategic roles, and the value we deliver.",
        map_table_region: "Region / Location",
        map_table_role: "Strategic Role",
        map_table_hq_title: "Chile (HQ)",
        map_table_hq_role: "Main Technical Delivery",
        map_table_hq_desc: "Architecture, technical direction, project leadership.",
        map_table_br_title: "Brazil",
        map_table_br_role: "Main Technical Delivery",
        map_table_br_desc: "SAP projects, Integration, Multicloud Operation.",
        map_table_cr_ve_title: "Costa Rica & Venezuela",
        map_table_cr_ve_role: "Support & Continuity",
        map_table_cr_ve_desc: "Operational \"Follow-the-sun\" / Regional support.",
        map_table_mia_title: "Miami",
        map_table_mia_role: "Alliance Hub",
        map_table_mia_desc: "Alliance hub (AWS, Google, Huawei, ScaleUp AI).",
        map_table_in_title: "India",
        map_table_in_role: "Development Accelerator",
        map_table_in_desc: "Data Engineering + Automation + Dev SecOps.",
        map_footer_h4: "Our Commitment",
        map_footer_q: "\"We operate with our own global teams, without outsourcing. Your point of contact is a senior consultant, not a ticket.\"",
        // --- Página: contact.html ---
        contact_h2: "Let's Start the Conversation",
        contact_p1: "You've explored our global innovation in AI and our expert execution in Cloud and SAP. You've seen how we transform data into results for industry leaders.",
        contact_p2: "Now, it's your turn. Every great transformation begins with a simple conversation. Whether you have a complex migration challenge, an AI project, or an optimization query, our team is ready to listen.",
        form_name: "Name",
        form_lastname: "Last Name",
        form_email: "Email address",
        form_phone: "Phone (Optional)",
        form_company: "Company Name (Optional)",
        form_role: "Role (Optional)",
        form_service: "Service of Interest",
        form_service_option: "Select a service of interest...",
        form_message: "Message",
        form_submit_btn: "Send",
        contact_info_h2: "Direct Information",
        contact_info_phone: "Phone:",
        contact_info_email: "Email:",
        contact_info_address: "Address:",
        popup_title: "Thank you for contacting us!",
        popup_p: "Your message has been sent. For faster assistance, you can contact us directly on WhatsApp.",
        popup_btn: "Chat on WhatsApp",
        // ... (add more keys)
    },
    pt: {
        // --- Navegação (Chaves compartilhadas) ---
        nav_inicio: "INÍCIO",
        nav_servicios: "SERVIÇOS",
        nav_servicios_cloud: "NUVEM",
        nav_servicios_integrate: "INTEGRATE",
        nav_servicios_data_ai: "DATA+AI",
        nav_servicios_secure: "SECURE",
        nav_servicios_sap: "SAP",
        nav_equipo: "EQUIPE",
        nav_noticias: "NOTÍCIAS",
        nav_contacto: "CONTATO",
        // --- Rodapé (Chaves compartilhadas) ---
        footer_copyright: "© 2025 Lamarr Tech. Todos os direitos reservados.",
        // --- Página: index.html ---
        hero_h1: "Acreditamos que o valor real nasce da conexão da tecnologia com o suporte humano especializado.",
        hero_p: "É por isso que integramos seu ecossistema End-to-End (SAP, Nuvem, Apps) para operar sem atritos. Acompanhamos você com consultores especializados, não com tickets. Entendemos seu negócio e estamos presentes em cada etapa.",
        card_cloud_h3: "Arquitetura Multicloud para o seu Negócio",
        card_cloud_p: "Escolhemos e combinamos AWS, Google Cloud e Huawei para construir uma infraestrutura flexível, eficiente e pronta para crescer. Sem dependências forçadas. Você escolhe. O seu negócio manda.",
        card_cloud_btn: "Ver Nuvem",
        card_integrate_h3: "Integração do seu Ecossistema Tecnológico",
        card_integrate_p: "Conectamos SAP, nuvem, aplicativos e dados para que a operação flua sem silos, retrabalho e atritos.",
        card_integrate_btn: "Ver Integrate",
        card_data_h3: "Do Dado à Ação (Data + IA)",
        card_data_p: "Transformamos seus dados em conhecimento acionável. Decisões mais rápidas, precisas e estratégicas com impacto direto na sua operação.",
        card_data_btn: "Ver Data+AI",
        card_secure_h3: "Proteção Integral de Dados e Operações",
        card_secure_p: "Projetamos segurança multinuvem com controle de acesso, backup inteligente e monitoramento contínuo. Menos risco, mais continuidade e visibilidade total.",
        card_secure_btn: "Ver Secure",
        card_sap_h3: "Domínio Profundo do Ecossistema SAP",
        card_sap_p: "+20 anos de experiência real em SAP Business One e SAP ECC. Implementamos e otimizamos com critério e conhecimento de processos. Resultados desde o primeiro dia.",
        card_sap_btn: "Ver SAP",
        partners_h2: "Nossos Parceiros Tecnológicos",
        map_h3: "Nossa Presença e Capacidade Global",
        map_p: "Um resumo de nossas sedes, funções estratégicas e o valor que entregamos.",
        map_table_region: "Região / Sede",
        map_table_role: "Papel Estratégico",
        map_table_hq_title: "Chile (HQ)",
        map_table_hq_role: "Entrega Técnica Principal",
        map_table_hq_desc: "Arquitetura, direção técnica, liderança de projetos.",
        map_table_br_title: "Brasil",
        map_table_br_role: "Entrega Técnica Principal",
        map_table_br_desc: "Projetos SAP, Integração, Operação Multicloud.",
        map_table_cr_ve_title: "Costa Rica & Venezuela",
        map_table_cr_ve_role: "Suporte e Continuidade",
        map_table_cr_ve_desc: "Operacional \"Follow-the-sun\" / Suporte regional.",
        map_table_mia_title: "Miami",
        map_table_mia_role: "Hub de Alianças",
        map_table_mia_desc: "Hub de alianças (AWS, Google, Huawei, ScaleUp AI).",
        map_table_in_title: "Índia",
        map_table_in_role: "Acelerador de Desenvolvimento",
        map_table_in_desc: "Data Engineering + Automação + Dev SecOps.",
        map_footer_h4: "Nosso Compromisso",
        map_footer_q: "\"Operamos com equipes globais próprias, sem terceirização. Seu ponto de contato é um consultor sênior, não um ticket.\"",
        // --- Página: contact.html ---
        contact_h2: "Vamos Iniciar a Conversa",
        contact_p1: "Você explorou nossa inovação global em IA e nossa execução especializada em Nuvem e SAP. Viu como transformamos dados em resultados para líderes da indústria.",
        contact_p2: "Agora, é a sua vez. Toda grande transformação começa com uma simples conversa. Seja um desafio complexo de migração, um projeto de IA ou uma consulta sobre otimização, nossa equipe está pronta para ouvi-lo.",
        form_name: "Nome",
        form_lastname: "Sobrenome",
        form_email: "Endereço de e-mail",
        form_phone: "Telefone (Opcional)",
        form_company: "Nome da Empresa (Opcional)",
        form_role: "Cargo (Opcional)",
        form_service: "Serviço de Interesse",
        form_service_option: "Selecione um serviço de interesse...",
        form_message: "Mensagem",
        form_submit_btn: "Enviar",
        contact_info_h2: "Informações Diretas",
        contact_info_phone: "Telefone:",
        contact_info_email: "Email:",
        contact_info_address: "Endereço:",
        popup_title: "Obrigado por nos contatar!",
        popup_p: "Sua mensagem foi enviada. Para um atendimento mais rápido, você pode nos contatar diretamente pelo WhatsApp.",
        popup_btn: "Falar pelo WhatsApp",
        // ... (adicionar mais chaves)
    }
};

// Función para establecer el idioma
function setLanguage(lang) {
    if (!translations[lang]) {
        console.error(`Idioma no encontrado: ${lang}`);
        return;
    }

    const elements = document.querySelectorAll('[data-lang-key]');
    const translationData = translations[lang];

    elements.forEach(element => {
        const key = element.getAttribute('data-lang-key');
        if (translationData[key]) {
            // Manejar diferentes tipos de elementos (ej. placeholders en inputs)
            if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                if (element.placeholder) {
                    element.placeholder = translationData[key];
                }
                // Si es un botón de submit
                if (element.type === 'submit' || element.type === 'button') {
                     element.value = translationData[key];
                }
            } else if (element.tagName === 'OPTION' && element.value === "") {
                // Para el option deshabilitado
                element.textContent = translationData[key];
            }
             else {
                // Para la mayoría de los elementos (p, h1, a, span, button)
                element.textContent = translationData[key];
            }
        } else {
            // console.warn(`Clave de traducción no encontrada para '${key}' en '${lang}'`);
        }
    });

    // Guardar preferencia en localStorage
    localStorage.setItem('lang', lang);

    // Actualizar el botón principal
    const langBtnText = document.querySelector('.lang-btn-text');
    if (langBtnText) {
        langBtnText.textContent = lang.toUpperCase();
    }

    // Actualizar la clase activa en el dropdown
    const langLinks = document.querySelectorAll('.lang-dropdown a');
    langLinks.forEach(link => {
        if (link.getAttribute('data-lang') === lang) {
            link.classList.add('active');
        } else {
            link.classList.remove('active');
        }
    });

    // Cerrar el dropdown
    const langDropdown = document.querySelector('.lang-dropdown');
    if (langDropdown) {
        langDropdown.classList.remove('show');
    }
}


document.addEventListener("DOMContentLoaded", function() {

    function initMobileMenu() {
        const menuToggle = document.querySelector('.menu-toggle');
        const mobileNavContainer = document.querySelector('.mobile-nav-container');
        const menuIconOpen = document.querySelector('#menu-icon-open');
        const menuIconClose = document.querySelector('#menu-icon-close');

        if (menuToggle && mobileNavContainer && menuIconOpen && menuIconClose) {
            menuToggle.addEventListener('click', function() {
                mobileNavContainer.classList.toggle('open');
                
                const isOpen = mobileNavContainer.classList.contains('open');
                menuIconOpen.style.display = isOpen ? 'none' : 'block';
                menuIconClose.style.display = isOpen ? 'block' : 'none';
            });
        }

        const submenuToggles = document.querySelectorAll('.mobile-submenu-toggle');
        submenuToggles.forEach(toggle => {
            toggle.addEventListener('click', function(e) {
                e.preventDefault();
                const submenuContent = this.nextElementSibling;
                const arrow = this.querySelector('.dropdown-arrow');

                if (submenuContent && submenuContent.classList.contains('mobile-submenu-content')) {
                    if (submenuContent.style.maxHeight) {
                        submenuContent.style.maxHeight = null;
                        if (arrow) {
                            arrow.classList.remove('rotated');
                        }
                    } else {
                        submenuContent.style.maxHeight = submenuContent.scrollHeight + "px";
                        if (arrow) {
                            arrow.classList.add('rotated');
                        }
                    }
                }
            });
        });
    }

    // --- MODIFICADO: Función para el botón de idioma ---
    function initLanguageSwitcher() {
        const langBtn = document.querySelector('.lang-btn');
        const langDropdown = document.querySelector('.lang-dropdown');

        if (langBtn && langDropdown) {
            // 1. Abrir/Cerrar dropdown con el botón
            langBtn.addEventListener('click', function(e) {
                e.stopPropagation(); // Evita que el clic se propague al window
                langDropdown.classList.toggle('show');
            });

            // 2. Cierra el dropdown si se hace clic fuera de él
            window.addEventListener('click', function(e) {
                if (langDropdown.classList.contains('show')) {
                    langDropdown.classList.remove('show');
                }
            });

            // 3. Evita que el clic en el dropdown lo cierre
            langDropdown.addEventListener('click', function(e) {
                e.stopPropagation();
            });

            // 4. Asignar eventos a los enlaces de idioma
            const langLinks = langDropdown.querySelectorAll('a[data-lang]');
            langLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const selectedLang = this.getAttribute('data-lang');
                    setLanguage(selectedLang);
                    // Opcional: cerrar dropdown al seleccionar
                    // langDropdown.classList.remove('show'); 
                });
            });
        }
    }
    // --- FIN MODIFICADO ---


    function initAnimations() {
        // ... (código de animación existente si lo hay) ...
    }

    // --- Carga inicial ---
    if (document.readyState === 'complete' || (document.readyState !== 'loading' && !document.documentElement.doScroll)) {
        initAnimations();
        initMobileMenu();
        initLanguageSwitcher(); // Llamada a la función
        
        // Establecer idioma al cargar la página
        const savedLang = localStorage.getItem('lang') || 'es'; // 'es' como default
        setLanguage(savedLang);
    } else {
        document.addEventListener('load', () => {
            initAnimations();
            initMobileMenu();
            initLanguageSwitcher(); // Llamada a la función

            // Establecer idioma al cargar la página
            const savedLang = localStorage.getItem('lang') || 'es'; // 'es' como default
            setLanguage(savedLang);
        }, false);
    }
});